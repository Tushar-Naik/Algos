package com.fb.graph;

import java.util.HashSet;

public class FindCycle<T> {

	/**
	 * Finding cycle in an Directed Graph. Like a topologocal sort
	 * Run on all nodes and do dfs
	 */
	private DirectedGraph<T> graph;
	private HashSet<T> visited = new HashSet<T>();
	private HashSet<T> completed = new HashSet<T>();
	
	public FindCycle(DirectedGraph<T> graph){
		this.graph = graph;
	}
	
	public void findCycle(){
		for(T node: graph){
			if(!visited.contains(node)){
				dfs(node, new HashSet<T>());
			}
		}
	}
	public void dfs(T node,HashSet<T> parentNodes){
		visited.add(node);
		for(T leaf : graph.getAdjacentNodes(node)){
			if(parentNodes.contains(leaf)){
				throw new IllegalStateException("Cycle Detected");
			}
			parentNodes.add(node);
			dfs(leaf, parentNodes);
		}
	}
	
	public static void main(String[] args) {
		// TODO Auto-generated method stub

	}

}
